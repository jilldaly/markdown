\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Chp 4 Results - Random Forest},
            pdfauthor={Jill Daly},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Chp 4 Results - Random Forest}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Jill Daly}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{06 December, 2018}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}

\begin{document}
\maketitle

\begin{figure}
\centering
\includegraphics{CHP4_RF_Results_files/figure-latex/baseline-rf-plot-1.pdf}
\caption{Baseline Model}
\end{figure}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-params}Baseline RF Model Model Method}
\centering
\begin{tabular}[t]{l}
\toprule
x\\
\midrule
ranger\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-params}Baseline RF Model Tuning Params}
\centering
\begin{tabular}[t]{lll}
\toprule
parameter & class & label\\
\midrule
mtry & numeric & \#Randomly Selected Predictors\\
splitrule & character & Splitting Rule\\
min.node.size & numeric & Minimal Node Size\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-params}Baseline RF Best Tuned Model from Caret}
\centering
\begin{tabular}[t]{lrlr}
\toprule
  & mtry & splitrule & min.node.size\\
\midrule
10 & 4 & extratrees & 1\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-params}Baseline RF Model Coefficients}
\centering
\begin{tabular}[t]{l}
\toprule
x\\
\midrule
Timestamp\\
X\_AXIS\\
Y\_AXIS\\
Z\_AXIS\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-params}Baseline RF Training Model Results}
\centering
\begin{tabular}[t]{rlrrrrrrrrrrrrrrrrrrrrrrrrrrrrr}
\toprule
mtry & splitrule & min.node.size & logLoss & AUC & prAUC & Accuracy & Kappa & Mean\_F1 & Mean\_Sensitivity & Mean\_Specificity & Mean\_Pos\_Pred\_Value & Mean\_Neg\_Pred\_Value & Mean\_Precision & Mean\_Recall & Mean\_Detection\_Rate & Mean\_Balanced\_Accuracy & logLossSD & AUCSD & prAUCSD & AccuracySD & KappaSD & Mean\_F1SD & Mean\_SensitivitySD & Mean\_SpecificitySD & Mean\_Pos\_Pred\_ValueSD & Mean\_Neg\_Pred\_ValueSD & Mean\_PrecisionSD & Mean\_RecallSD & Mean\_Detection\_RateSD & Mean\_Balanced\_AccuracySD\\
\midrule
1 & extratrees & 1 & 0.3784207 & 0.9598349 & 0.7937772 & 0.8878320 & 0.8151194 & 0.6843176 & 0.6685999 & 0.9535059 & 0.8463100 & 0.9664881 & 0.8463100 & 0.6685999 & 0.2219580 & 0.8110529 & 0.0048337 & 0.0030072 & 0.0101502 & 0.0041404 & 0.0069227 & 0.0068447 & 0.0052634 & 0.0018019 & 0.0313888 & 0.0016229 & 0.0313888 & 0.0052634 & 0.0010351 & 0.0032883\\
1 & extratrees & 3 & 0.3894692 & 0.9588288 & 0.7901937 & 0.8868203 & 0.8131755 & 0.6746487 & 0.6621123 & 0.9530059 & 0.8364630 & 0.9664421 & 0.8364630 & 0.6621123 & 0.2217051 & 0.8075591 & 0.0042792 & 0.0026874 & 0.0084706 & 0.0053488 & 0.0090397 & 0.0122107 & 0.0085804 & 0.0023049 & 0.0444188 & 0.0020032 & 0.0444188 & 0.0085804 & 0.0013372 & 0.0052878\\
1 & extratrees & 5 & 0.4034328 & 0.9579351 & 0.7884708 & 0.8858761 & 0.8114464 & 0.6685389 & 0.6572764 & 0.9525749 & 0.8109909 & 0.9662815 & 0.8109909 & 0.6572764 & 0.2214690 & 0.8049257 & 0.0065262 & 0.0030126 & 0.0121979 & 0.0044100 & 0.0074670 & 0.0103878 & 0.0077112 & 0.0019191 & 0.0701638 & 0.0016703 & 0.0701638 & 0.0077112 & 0.0011025 & 0.0046297\\
2 & extratrees & 1 & 0.3513683 & 0.9617119 & 0.7990936 & 0.8918116 & 0.8222696 & 0.7017545 & 0.6823099 & 0.9554584 & 0.8414121 & 0.9674028 & 0.8414121 & 0.6823099 & 0.2229529 & 0.8188842 & 0.0058448 & 0.0034532 & 0.0111402 & 0.0043274 & 0.0072103 & 0.0103320 & 0.0066784 & 0.0019358 & 0.0274212 & 0.0017349 & 0.0274212 & 0.0066784 & 0.0010818 & 0.0039004\\
2 & extratrees & 3 & 0.3579274 & 0.9611912 & 0.7995751 & 0.8910698 & 0.8208661 & 0.6950957 & 0.6779427 & 0.9550713 & 0.8420071 & 0.9672972 & 0.8420071 & 0.6779427 & 0.2227675 & 0.8165070 & 0.0056977 & 0.0026289 & 0.0093989 & 0.0056274 & 0.0094306 & 0.0141129 & 0.0093601 & 0.0024569 & 0.0207601 & 0.0021471 & 0.0207601 & 0.0093601 & 0.0014068 & 0.0055937\\
\addlinespace
2 & extratrees & 5 & 0.3693924 & 0.9599075 & 0.7969109 & 0.8887315 & 0.8167634 & 0.6849684 & 0.6707574 & 0.9540035 & 0.8488542 & 0.9666457 & 0.8488542 & 0.6707574 & 0.2221829 & 0.8123804 & 0.0066788 & 0.0031494 & 0.0098250 & 0.0042991 & 0.0071386 & 0.0136914 & 0.0077928 & 0.0018558 & 0.0373905 & 0.0017329 & 0.0373905 & 0.0077928 & 0.0010748 & 0.0044753\\
3 & extratrees & 1 & 0.3456594 & 0.9618358 & 0.7993581 & 0.8905751 & 0.8205288 & 0.7107466 & 0.6879514 & 0.9550727 & 0.8348370 & 0.9664615 & 0.8348370 & 0.6879514 & 0.2226438 & 0.8215121 & 0.0098467 & 0.0045044 & 0.0124890 & 0.0067015 & 0.0111387 & 0.0121260 & 0.0089056 & 0.0028923 & 0.0229274 & 0.0026024 & 0.0229274 & 0.0089056 & 0.0016754 & 0.0055294\\
3 & extratrees & 3 & 0.3483300 & 0.9622928 & 0.8023070 & 0.8907998 & 0.8208314 & 0.7067712 & 0.6859386 & 0.9551514 & 0.8365289 & 0.9666536 & 0.8365289 & 0.6859386 & 0.2227000 & 0.8205450 & 0.0070511 & 0.0028738 & 0.0095079 & 0.0069226 & 0.0114943 & 0.0121167 & 0.0083580 & 0.0030614 & 0.0221792 & 0.0027644 & 0.0221792 & 0.0083580 & 0.0017306 & 0.0052681\\
3 & extratrees & 5 & 0.3569566 & 0.9611556 & 0.8016605 & 0.8886641 & 0.8170287 & 0.6967237 & 0.6783656 & 0.9541357 & 0.8402205 & 0.9661061 & 0.8402205 & 0.6783656 & 0.2221660 & 0.8162507 & 0.0095204 & 0.0040055 & 0.0118235 & 0.0073049 & 0.0121529 & 0.0142410 & 0.0097385 & 0.0031379 & 0.0260484 & 0.0028684 & 0.0260484 & 0.0097385 & 0.0018262 & 0.0061554\\
4 & extratrees & 1 & 0.3452743 & 0.9620852 & 0.7980375 & 0.8874273 & 0.8155664 & 0.7138849 & 0.6891367 & 0.9539346 & 0.8230126 & 0.9649649 & 0.8230126 & 0.6891367 & 0.2218568 & 0.8215357 & 0.0110260 & 0.0037473 & 0.0108335 & 0.0080080 & 0.0132967 & 0.0089672 & 0.0072941 & 0.0035494 & 0.0226149 & 0.0031578 & 0.0226149 & 0.0072941 & 0.0020020 & 0.0051482\\
\addlinespace
4 & extratrees & 3 & 0.3509461 & 0.9612448 & 0.8001144 & 0.8864158 & 0.8137527 & 0.7091397 & 0.6854317 & 0.9534455 & 0.8295797 & 0.9646925 & 0.8295797 & 0.6854317 & 0.2216040 & 0.8194386 & 0.0119400 & 0.0044897 & 0.0117869 & 0.0084053 & 0.0139683 & 0.0110914 & 0.0092654 & 0.0036624 & 0.0209732 & 0.0033179 & 0.0209732 & 0.0092654 & 0.0021013 & 0.0062612\\
4 & extratrees & 5 & 0.3576892 & 0.9599827 & 0.7993447 & 0.8854490 & 0.8119447 & 0.7051199 & 0.6818409 & 0.9528644 & 0.8389608 & 0.9644543 & 0.8389608 & 0.6818409 & 0.2213623 & 0.8173527 & 0.0110337 & 0.0053146 & 0.0140728 & 0.0081296 & 0.0134878 & 0.0115160 & 0.0087885 & 0.0035125 & 0.0265615 & 0.0032584 & 0.0265615 & 0.0087885 & 0.0020324 & 0.0058176\\
\bottomrule
\end{tabular}
\end{table}

\begin{verbatim}
## Ranger result
## 
## Call:
##  ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = param$mtry, min.node.size = param$min.node.size, splitrule = as.character(param$splitrule),      write.forest = TRUE, probability = classProbs, ...) 
## 
## Type:                             Probability estimation 
## Number of trees:                  500 
## Sample size:                      4942 
## Number of independent variables:  4 
## Mtry:                             4 
## Target node size:                 1 
## Variable importance mode:         none 
## Splitrule:                        extratrees 
## OOB prediction error (Brier s.):  0.02414392
\end{verbatim}

\begin{verbatim}
## Random Forest 
## 
## 4942 samples
##    4 predictor
##    4 classes: 'PATH_IDLE', 'PATH_MOVING', 'PATH_TRANSITION', 'SHUTTLE' 
## 
## Pre-processing: nearest neighbor imputation (4), centered (4), scaled (4) 
## Resampling: Bootstrapped (10 reps) 
## Summary of sample sizes: 495, 495, 493, 496, 493, 493, ... 
## Resampling results across tuning parameters:
## 
##   mtry  min.node.size  logLoss    AUC        prAUC      Accuracy 
##   1     1              0.3784207  0.9598349  0.7937772  0.8878320
##   1     3              0.3894692  0.9588288  0.7901937  0.8868203
##   1     5              0.4034328  0.9579351  0.7884708  0.8858761
##   2     1              0.3513683  0.9617119  0.7990936  0.8918116
##   2     3              0.3579274  0.9611912  0.7995751  0.8910698
##   2     5              0.3693924  0.9599075  0.7969109  0.8887315
##   3     1              0.3456594  0.9618358  0.7993581  0.8905751
##   3     3              0.3483300  0.9622928  0.8023070  0.8907998
##   3     5              0.3569566  0.9611556  0.8016605  0.8886641
##   4     1              0.3452743  0.9620852  0.7980375  0.8874273
##   4     3              0.3509461  0.9612448  0.8001144  0.8864158
##   4     5              0.3576892  0.9599827  0.7993447  0.8854490
##   Kappa      Mean_F1    Mean_Sensitivity  Mean_Specificity
##   0.8151194  0.6843176  0.6685999         0.9535059       
##   0.8131755  0.6746487  0.6621123         0.9530059       
##   0.8114464  0.6685389  0.6572764         0.9525749       
##   0.8222696  0.7017545  0.6823099         0.9554584       
##   0.8208661  0.6950957  0.6779427         0.9550713       
##   0.8167634  0.6849684  0.6707574         0.9540035       
##   0.8205288  0.7107466  0.6879514         0.9550727       
##   0.8208314  0.7067712  0.6859386         0.9551514       
##   0.8170287  0.6967237  0.6783656         0.9541357       
##   0.8155664  0.7138849  0.6891367         0.9539346       
##   0.8137527  0.7091397  0.6854317         0.9534455       
##   0.8119447  0.7051199  0.6818409         0.9528644       
##   Mean_Pos_Pred_Value  Mean_Neg_Pred_Value  Mean_Precision  Mean_Recall
##   0.8463100            0.9664881            0.8463100       0.6685999  
##   0.8364630            0.9664421            0.8364630       0.6621123  
##   0.8109909            0.9662815            0.8109909       0.6572764  
##   0.8414121            0.9674028            0.8414121       0.6823099  
##   0.8420071            0.9672972            0.8420071       0.6779427  
##   0.8488542            0.9666457            0.8488542       0.6707574  
##   0.8348370            0.9664615            0.8348370       0.6879514  
##   0.8365289            0.9666536            0.8365289       0.6859386  
##   0.8402205            0.9661061            0.8402205       0.6783656  
##   0.8230126            0.9649649            0.8230126       0.6891367  
##   0.8295797            0.9646925            0.8295797       0.6854317  
##   0.8389608            0.9644543            0.8389608       0.6818409  
##   Mean_Detection_Rate  Mean_Balanced_Accuracy
##   0.2219580            0.8110529             
##   0.2217051            0.8075591             
##   0.2214690            0.8049257             
##   0.2229529            0.8188842             
##   0.2227675            0.8165070             
##   0.2221829            0.8123804             
##   0.2226438            0.8215121             
##   0.2227000            0.8205450             
##   0.2221660            0.8162507             
##   0.2218568            0.8215357             
##   0.2216040            0.8194386             
##   0.2213623            0.8173527             
## 
## Tuning parameter 'splitrule' was held constant at a value of extratrees
## logLoss was used to select the optimal model using the smallest value.
## The final values used for the model were mtry = 4, splitrule =
##  extratrees and min.node.size = 1.
\end{verbatim}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-results}Baseline RF - Validation Accuracy}
\centering
\begin{tabular}[t]{lr}
\toprule
  & x\\
\midrule
Accuracy & 0.5772966\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-results}Baseline RF Validation Metrics}
\centering
\begin{tabular}[t]{lrrl}
\toprule
  & Sensitivity & Specificity & MultiClassAUC\\
\midrule
PATH\_IDLE & 0.1100796 & 1.0000000 & 0.998566022671787\\
PATH\_MOVING & 0.9822198 & 0.5910564 & 0.985820889528906\\
PATH\_TRANSITION & 0.8413284 & 0.9929351 & 0.993909977635422\\
SHUTTLE & 1.0000000 & 0.8190932 & 0.999354378054292\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-results}Baseline RF Vaidation Confusion Matrix}
\centering
\begin{tabular}[t]{lrrrr}
\toprule
  & PATH\_IDLE & PATH\_MOVING & PATH\_TRANSITION & SHUTTLE\\
\midrule
PATH\_IDLE & 249 & 0 & 0 & 0\\
PATH\_MOVING & 1219 & 1823 & 43 & 0\\
PATH\_TRANSITION & 0 & 33 & 228 & 0\\
SHUTTLE & 794 & 0 & 0 & 553\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:baseline-rf-results}Baseline RF Vaidation LogLoss}
\centering
\begin{tabular}[t]{r}
\toprule
x\\
\midrule
NA\\
\bottomrule
\end{tabular}
\end{table}

\begin{figure}
\centering
\includegraphics{CHP4_RF_Results_files/figure-latex/plot_mc-roc-1.pdf}
\caption{Multi-Class ROC using 4 Binary ROC Curves}
\end{figure}


\end{document}
