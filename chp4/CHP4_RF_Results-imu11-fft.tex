\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Chp 4 Results - Random Forest},
            pdfauthor={Jill Daly},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Chp 4 Results - Random Forest}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Jill Daly}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{16 December, 2018}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}

\begin{document}
\maketitle

\begin{figure}
\centering
\includegraphics{CHP4_RF_Results_files/figure-latex/6A-sensor-plot-fft_z-1.pdf}
\caption{FFT - Z - Model}
\end{figure}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-params}FFT - Z - RF Training Model Results}
\centering
\begin{tabular}[t]{rrlrrrrrrrrrrrrrrrrrrrrrrrrrrrr}
\toprule
mtry & min.node.size & splitrule & logLoss & AUC & prAUC & Accuracy & Kappa & Mean\_F1 & Mean\_Sensitivity & Mean\_Specificity & Mean\_Pos\_Pred\_Value & Mean\_Neg\_Pred\_Value & Mean\_Precision & Mean\_Recall & Mean\_Detection\_Rate & Mean\_Balanced\_Accuracy & logLossSD & AUCSD & prAUCSD & AccuracySD & KappaSD & Mean\_F1SD & Mean\_SensitivitySD & Mean\_SpecificitySD & Mean\_Pos\_Pred\_ValueSD & Mean\_Neg\_Pred\_ValueSD & Mean\_PrecisionSD & Mean\_RecallSD & Mean\_Detection\_RateSD & Mean\_Balanced\_AccuracySD\\
\midrule
2 & 1 & gini & 0.4716731 & 0.9449942 & 0.8166366 & 0.8278770 & 0.6644319 & 0.7003397 & 0.6376498 & 0.9094572 & 0.8492155 & 0.9295037 & 0.8492155 & 0.6376498 & 0.2069692 & 0.7735535 & 0.0039512 & 0.0013245 & 0.0037221 & 0.0022629 & 0.0048833 & 0.0051680 & 0.0050114 & 0.0013926 & 0.0030684 & 0.0010018 & 0.0030684 & 0.0050114 & 0.0005657 & 0.0031237\\
2 & 1 & extratrees & 0.4584993 & 0.9592989 & 0.8437116 & 0.8384461 & 0.6863428 & 0.7212888 & 0.6615759 & 0.9149525 & 0.8441415 & 0.9347150 & 0.8441415 & 0.6615759 & 0.2096115 & 0.7882642 & 0.0020279 & 0.0008723 & 0.0024288 & 0.0016967 & 0.0035964 & 0.0038217 & 0.0038367 & 0.0010169 & 0.0026284 & 0.0007601 & 0.0026284 & 0.0038367 & 0.0004242 & 0.0023249\\
3 & 1 & gini & 0.4023431 & 0.9584618 & 0.8341595 & 0.8524515 & 0.7192342 & 0.7629157 & 0.7117615 & 0.9252565 & 0.8495376 & 0.9381341 & 0.8495376 & 0.7117615 & 0.2131129 & 0.8185090 & 0.0031926 & 0.0010361 & 0.0036562 & 0.0014618 & 0.0031349 & 0.0032687 & 0.0037389 & 0.0010175 & 0.0029760 & 0.0006162 & 0.0029760 & 0.0037389 & 0.0003655 & 0.0022688\\
3 & 1 & extratrees & 0.4142125 & 0.9650661 & 0.8559477 & 0.8528256 & 0.7199087 & 0.7638376 & 0.7154666 & 0.9252834 & 0.8425066 & 0.9386541 & 0.8425066 & 0.7154666 & 0.2132064 & 0.8203750 & 0.0017641 & 0.0006829 & 0.0024198 & 0.0011064 & 0.0023435 & 0.0026206 & 0.0031352 & 0.0007381 & 0.0019251 & 0.0004980 & 0.0019251 & 0.0031352 & 0.0002766 & 0.0018307\\
5 & 1 & gini & 0.4019065 & 0.9598630 & 0.6684471 & 0.8563357 & 0.7306301 & 0.7803981 & 0.7444376 & 0.9297844 & 0.8302072 & 0.9380369 & 0.8302072 & 0.7444376 & 0.2140839 & 0.8371110 & 0.0061105 & 0.0011750 & 0.0066496 & 0.0008117 & 0.0018286 & 0.0022159 & 0.0035473 & 0.0006364 & 0.0018835 & 0.0002754 & 0.0018835 & 0.0035473 & 0.0002029 & 0.0020106\\
5 & 1 & extratrees & 0.3844525 & 0.9670402 & 0.8257743 & 0.8564586 & 0.7301379 & 0.7815650 & 0.7446911 & 0.9291936 & 0.8332076 & 0.9386557 & 0.8332076 & 0.7446911 & 0.2141146 & 0.8369424 & 0.0025316 & 0.0006869 & 0.0032161 & 0.0012423 & 0.0023768 & 0.0022468 & 0.0029447 & 0.0006738 & 0.0019832 & 0.0006598 & 0.0019832 & 0.0029447 & 0.0003106 & 0.0016870\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-params}FFT - Z Combined - RF Model Tuning Params}
\centering
\begin{tabular}[t]{lll}
\toprule
parameter & class & label\\
\midrule
mtry & numeric & \#Randomly Selected Predictors\\
splitrule & character & Splitting Rule\\
min.node.size & numeric & Minimal Node Size\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-params}FFT - Z Combined - RF Best Tuned Model from Caret}
\centering
\begin{tabular}[t]{lrlr}
\toprule
  & mtry & splitrule & min.node.size\\
\midrule
6 & 5 & extratrees & 1\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-params}FFT - Z Combined - RF Model Coefficients}
\centering
\begin{tabular}[t]{l}
\toprule
x\\
\midrule
Timestamp\\
fft\_mean\_Re\\
fft\_mean\_Im\\
fft\_sd\_Re\\
fft\_sd\_Im\\
\bottomrule
\end{tabular}
\end{table}

\begin{verbatim}
## Ranger result
## 
## Call:
##  ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = param$mtry, min.node.size = param$min.node.size, splitrule = as.character(param$splitrule),      write.forest = TRUE, probability = classProbs, ...) 
## 
## Type:                             Probability estimation 
## Number of trees:                  500 
## Sample size:                      226047 
## Number of independent variables:  5 
## Mtry:                             5 
## Target node size:                 1 
## Variable importance mode:         none 
## Splitrule:                        extratrees 
## OOB prediction error (Brier s.):  0.07910046
\end{verbatim}

\begin{verbatim}
## Random Forest 
## 
## 226047 samples
##      5 predictor
##      4 classes: 'PATH_IDLE', 'PATH_MOVING', 'PATH_TRANSITION', 'SHUTTLE' 
## 
## Pre-processing: nearest neighbor imputation (5), centered (5), scaled (5) 
## Resampling: Bootstrapped (10 reps) 
## Summary of sample sizes: 22606, 22603, 22604, 22606, 22605, 22606, ... 
## Resampling results across tuning parameters:
## 
##   mtry  splitrule   logLoss    AUC        prAUC      Accuracy   Kappa    
##   2     gini        0.4716731  0.9449942  0.8166366  0.8278770  0.6644319
##   2     extratrees  0.4584993  0.9592989  0.8437116  0.8384461  0.6863428
##   3     gini        0.4023431  0.9584618  0.8341595  0.8524515  0.7192342
##   3     extratrees  0.4142125  0.9650661  0.8559477  0.8528256  0.7199087
##   5     gini        0.4019065  0.9598630  0.6684471  0.8563357  0.7306301
##   5     extratrees  0.3844525  0.9670402  0.8257743  0.8564586  0.7301379
##   Mean_F1    Mean_Sensitivity  Mean_Specificity  Mean_Pos_Pred_Value
##   0.7003397  0.6376498         0.9094572         0.8492155          
##   0.7212888  0.6615759         0.9149525         0.8441415          
##   0.7629157  0.7117615         0.9252565         0.8495376          
##   0.7638376  0.7154666         0.9252834         0.8425066          
##   0.7803981  0.7444376         0.9297844         0.8302072          
##   0.7815650  0.7446911         0.9291936         0.8332076          
##   Mean_Neg_Pred_Value  Mean_Precision  Mean_Recall  Mean_Detection_Rate
##   0.9295037            0.8492155       0.6376498    0.2069692          
##   0.9347150            0.8441415       0.6615759    0.2096115          
##   0.9381341            0.8495376       0.7117615    0.2131129          
##   0.9386541            0.8425066       0.7154666    0.2132064          
##   0.9380369            0.8302072       0.7444376    0.2140839          
##   0.9386557            0.8332076       0.7446911    0.2141146          
##   Mean_Balanced_Accuracy
##   0.7735535             
##   0.7882642             
##   0.8185090             
##   0.8203750             
##   0.8371110             
##   0.8369424             
## 
## Tuning parameter 'min.node.size' was held constant at a value of 1
## logLoss was used to select the optimal model using the smallest value.
## The final values used for the model were mtry = 5, splitrule =
##  extratrees and min.node.size = 1.
\end{verbatim}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-results}FFT - Z - Validation Accuracy}
\centering
\begin{tabular}[t]{lr}
\toprule
  & x\\
\midrule
Accuracy & 0.9114078\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-results}FFT - Z - RF Validation Metrics}
\centering
\begin{tabular}[t]{lrrl}
\toprule
  & Sensitivity & Specificity & MultiClassAUC\\
\midrule
PATH\_IDLE & 0.8611957 & 0.9565958 & 0.981148933119338\\
PATH\_MOVING & 0.9504465 & 0.8866984 & 0.982225996663473\\
PATH\_TRANSITION & 0.8549493 & 0.9912788 & 0.995396738372316\\
SHUTTLE & 0.7671584 & 0.9952329 & 0.995156719793984\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-results}FFT - Z - RF Vaidation Confusion Matrix}
\centering
\begin{tabular}[t]{lrrrr}
\toprule
  & PATH\_IDLE & PATH\_MOVING & PATH\_TRANSITION & SHUTTLE\\
\midrule
PATH\_IDLE & 50603 & 5507 & 1149 & 605\\
PATH\_MOVING & 6909 & 131538 & 1591 & 1431\\
PATH\_TRANSITION & 800 & 859 & 16704 & 142\\
SHUTTLE & 447 & 492 & 94 & 7176\\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[!h]

\caption{\label{tab:sensor-fft_z-rf-results}FFT - Z - RF Vaidation LogLoss}
\centering
\begin{tabular}[t]{r}
\toprule
x\\
\midrule
NA\\
\bottomrule
\end{tabular}
\end{table}

\begin{figure}
\centering
\includegraphics{CHP4_RF_Results_files/figure-latex/6A-sensor-roc-fft_z-1.pdf}
\caption{FFT - Z - ROC using 4 Binary ROC Curves}
\end{figure}


\end{document}
